# Lab 13 #

---

Updated helm chart. Prepare a manifest for StatefulSet

```
PS C:\users\dappa\devops\devops\k8s> helm install stateful devops-helm-app
NAME: stateful
LAST DEPLOYED: Sun Feb 19 22:36:38 2023
NAMESPACE: default
STATUS: deployed
REVISION: 1
NOTES:
1. Get the application URL by running these commands:
     NOTE: It may take a few minutes for the LoadBalancer IP to be available.
           You can watch the status of by running 'kubectl get --namespace default svc -w stateful-devops-helm-app'
  export SERVICE_IP=$(kubectl get svc --namespace default stateful-devops-helm-app --template "{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}")
  echo http://$SERVICE_IP:80
```

An output of kubectl get po,sts,svc,pvc

```
PS C:\users\dappa\devops\devops\k8s> kubectl get po,sts,svc,pvc
NAME                                            READY   STATUS    RESTARTS      AGE
pod/devops-server-deployment-74ffb95688-gdljd   1/1     Running   1 (29m ago)   153m
pod/devops-server-deployment-74ffb95688-hvxdt   1/1     Running   1 (29m ago)   153m
pod/devops-server-deployment-74ffb95688-stfqn   1/1     Running   1 (29m ago)   153m
pod/devops-server-deployment-74ffb95688-wdl99   1/1     Running   1 (29m ago)   153m
pod/devops-server-deployment-74ffb95688-wp7dp   1/1     Running   1 (29m ago)   153m
pod/stateful-devops-helm-app-0                  1/1     Running   0             8s
pod/stateful-devops-helm-app-b4d89bfc5-9mxbp    0/1     Running   0             8s

NAME                                        READY   AGE
statefulset.apps/stateful-devops-helm-app   2/2     8s

NAME                               TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGE
service/devops-server-service      LoadBalancer   10.104.230.177   <pending>     4000:31755/TCP   7h40m
service/kubernetes                 ClusterIP      10.96.0.1        <none>        443/TCP          9h
service/stateful-devops-helm-app   LoadBalancer   10.109.83.59     <pending>     80:31255/TCP     8s

NAME                                                                      STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
persistentvolumeclaim/persistent-volumemount-stateful-devops-helm-app-0   Bound    pvc-f9079363-14a5-4ef0-9d0d-a76fbbb80d4d   128Mi      RWO            standard       13m
persistentvolumeclaim/persistent-volumemount-stateful-devops-helm-app-1   Bound    pvc-e2032fbb-1ada-4724-b047-de0f9c4ddd24   128Mi      RWO            standard       13m
```
---
# Outputs #

`podManagementPolicy: "Parallel"`

If I change the podManagementPolicy field from Parallel to OrderedReady in the StatefulSet manifest for your Helm chart, it will change the way that Kubernetes manages the creation and deletion of pods in the StatefulSet.

With podManagementPolicy: Parallel, Kubernetes will create and delete pods in the StatefulSet in parallel, without waiting for the previous pod to become fully ready and available before creating the next one. This can lead to faster scaling and faster recovery from pod failures, but may also result in periods of reduced availability during the transition between old and new pods.

## stateful-devops-helm-app-1 ##

```
19.02.2023 22:50:15
19.02.2023 22:50:23
19.02.2023 22:50:23
19.02.2023 22:50:33
19.02.2023 22:50:33
19.02.2023 22:50:43
19.02.2023 22:50:43
19.02.2023 22:50:53
19.02.2023 22:50:53
19.02.2023 22:51:03
19.02.2023 22:51:03
19.02.2023 22:51:13
19.02.2023 22:51:13
19.02.2023 22:51:23
19.02.2023 22:51:23
19.02.2023 22:51:33
19.02.2023 22:51:33
19.02.2023 22:51:43
19.02.2023 22:51:43
19.02.2023 22:51:53
19.02.2023 22:51:53
19.02.2023 22:52:03
19.02.2023 22:52:03
19.02.2023 22:52:13
19.02.2023 22:52:13
19.02.2023 22:52:23
19.02.2023 22:52:23
19.02.2023 22:52:33
19.02.2023 22:52:33
19.02.2023 22:52:43
19.02.2023 22:52:43
19.02.2023 22:52:53
19.02.2023 22:52:53
19.02.2023 22:53:03
19.02.2023 22:53:03
19.02.2023 22:53:13
19.02.2023 22:53:13
19.02.2023 22:53:23
19.02.2023 22:53:23
19.02.2023 22:53:33
19.02.2023 22:53:33
19.02.2023 22:53:43
19.02.2023 22:53:43
19.02.2023 22:53:53
19.02.2023 22:53:53
```


## stateful-devops-helm-app-0 ##

```
19.02.2023 22:50:15
19.02.2023 22:50:23
19.02.2023 22:50:23
19.02.2023 22:50:33
19.02.2023 22:50:33
19.02.2023 22:50:43
19.02.2023 22:50:43
19.02.2023 22:50:53
19.02.2023 22:50:53
19.02.2023 22:51:03
19.02.2023 22:51:03
19.02.2023 22:51:13
19.02.2023 22:51:13
19.02.2023 22:51:23
19.02.2023 22:51:23
19.02.2023 22:51:33
19.02.2023 22:51:33
19.02.2023 22:51:43
19.02.2023 22:51:43
19.02.2023 22:51:53
19.02.2023 22:51:53
19.02.2023 22:52:03
19.02.2023 22:52:03
19.02.2023 22:52:13
19.02.2023 22:52:13
19.02.2023 22:52:23
19.02.2023 22:52:23
19.02.2023 22:52:33
19.02.2023 22:52:33
19.02.2023 22:52:43
19.02.2023 22:52:43
19.02.2023 22:52:53
19.02.2023 22:52:53
19.02.2023 22:53:03
19.02.2023 22:53:03
19.02.2023 22:53:13
19.02.2023 22:53:13
19.02.2023 22:53:23
19.02.2023 22:53:23
19.02.2023 22:53:33
19.02.2023 22:53:33
19.02.2023 22:53:43
19.02.2023 22:53:43
19.02.2023 22:53:53
19.02.2023 22:53:53
19.02.2023 22:54:03
19.02.2023 22:54:03
19.02.2023 22:54:13
19.02.2023 22:54:13
19.02.2023 22:54:23
19.02.2023 22:54:23
19.02.2023 22:54:33
19.02.2023 22:54:33
```